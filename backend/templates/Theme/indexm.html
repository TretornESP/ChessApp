<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>OpenChess CPanel</title>

    <!-- Bootstrap core CSS -->
    <link href="{{ url_for('static', filename='assets/css/bootstrap.css')}}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-horizon/0.1.1/bootstrap-horizon.css">

    <!--external css-->
    <link href="{{ url_for('static', filename='assets/font-awesome/css/font-awesome.css')}}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/css/zabuto_calendar.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/js/gritter/css/jquery.gritter.css')}}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/lineicons/style.css')}}">

    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='assets/css/style.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/css/style-responsive.css')}}" rel="stylesheet">

    <script src="{{ url_for('static', filename='assets/js/chart-master/Chart.js')}}"></script>

    <link href="{{ url_for('static', filename='assets/css/table-responsive.css')}}" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

  <section id="container" >
      <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
      <!--header start-->
      <header class="header black-bg">
              <div class="sidebar-toggle-box">
                  <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
              </div>
            <!--logo start-->
            <a href="index.html" class="logo"><b>OpenChess CPANEL</b></a>
            <!--logo end-->
            <div class="nav notify-row" id="top_menu">
            </div>
            <div class="top-menu">
            	<ul class="nav pull-right top-menu">
                    <li><a class="logout" href="{{url_for('get_links_end')}}">Buscador de enlaces</a></li>
            	</ul>
            </div>
        </header>
      <!--header end-->

      <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
      <!--sidebar start-->
      <aside>
          <div id="sidebar"  class="nav-collapse ">
              <!-- sidebar menu start-->
              <ul class="sidebar-menu" id="nav-accordion">

              	  <p class="centered"><a href="profile.html"><img src="{{ url_for('static', filename='assets/img/ui-sam.jpg')}}" class="img-circle" width="60"></a></p>
              	  <h5 class="centered">Openchess Admin</h5>

                  <li class="mt">
                      <a class="active" href="{{url_for('admin_pane')}}">
                          <i class="fa fa-dashboard"></i>
                          <span>Resumen</span>
                      </a>
                  </li>

                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-desktop"></i>
                          <span>Partidas</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="{{url_for('new')}}">Nueva partida</a></li>
                      </ul>
                      <ul class="sub">
                          <li><a  href="{{url_for('get_matches')}}">Ver partidas</a></li>
                      </ul>
                      <ul class="sub">
                          <li><a  href="{{url_for('remove_all')}}">Eliminar todas las partidas</a></li>
                      </ul>
                  </li>

                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-cogs"></i>
                          <span>Incidencias</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="{{url_for('get_events')}}">Ver incidencias</a></li>
                      </ul>
                  </li>
                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-book"></i>
                          <span>Resultados</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="#resultados">Ver resultados</a></li>
                      </ul>
                  </li>
              </ul>
              <!-- sidebar menu end-->
          </div>
      </aside>
      <!--sidebar end-->

      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              <div class="row">
                  <div class="col-lg-9 main-chart">
                  	<div id="resumen" class="row mtbox">
                  		<div class="col-md-2 col-sm-2 col-md-offset-1 box0">
                  			<div class="box1">
					  			        <span class="li_data"></span>
                            <div id="match_count_div">
                              <h3>{{ match_count }}</h3>
                            </div>
                  			</div>
					  		      	<p>Partidas almacenadas en la BBDD</p>
                  	 	</div>
                  		<div class="col-md-2 col-sm-2 box0">
                  			<div class="box1">
					  		        	<span class="li_cloud"></span>
                          <div id="active_count_div">
					  			          <h3>{{ active_count }}</h3>
                          </div>
                  			</div>
					  			      <p>Partidas jugandose actualmente</p>
                  	 	</div>
                      <div class="col-md-2 col-sm-2 box0">
                        <div class="box1">
                          <span class="li_trash"></span>
                          <div id="finished_count_div">
                            <h3>{{ finished_count }}</h3>
                          </div>
                        </div>
                        <p>Partidas finalizadas</p>
                      </div>
                  		<div class="col-md-2 col-sm-2 box0">
                  			<div class="box1">
					  		        	<span class="li_stack"></span>
                          <div id="event_count_div">
					  		        	  <h3>{{ event_count }}</h3>
                          </div>
                  			</div>
					  		      	<p>Incidencias por resolver</p>
                  		</div>
                      <div class="col-md-2 col-sm-2 box0">
                        <div class="box1">
                          <span class="li_fire"></span>
                          <div id="error_count_div">
                            <h3>{{ error_count }}</h3>
                          </div>
                        </div>
                       <p>Errores</p>
                      </div>
                  	</div><!-- /row mt -->
                    <div class="h-100">
                      <div class="d-flex justify-content-center h-100">
                        <div class="searchbar">
                          <input id="search_text" class="search_input" type="text" name="" placeholder="Buscar...">
                          <a id="search_button" href="#" class="search_icon"><i class="fas fa-search"></i></a>
                        </div>
                      </div>
                    </div>
                    <div id="partidas" class="row mt">

                    <!-- SERVER STATUS PANELS -->
                    </div><!-- /row -->
                  </div>
                  <div id="incidencias" class="col-lg-3 ds">
                    <!--COMPLETED ACTIONS DONUTS CHART-->
                     <h3>Incidencias</h3>
                      <!-- First Action -->
                        <div class="desc">
                           <div class="thumb">
                              <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                           </div>
                           <div class="details">
                              <p><muted>Hace 2 minutos</muted><br/>
                                 <a href="#">partida</a> reporto ilegal.<br/>
                              </p>
                           </div>
                        </div>
                  </div><!-- /col-lg-3 -->
        			  	<div id="resultados" class="col-lg-12">
                    <iframe id="txtArea1" style="display:none"></iframe>
                    <div class="content-panel">
                      <h4><i class="fa fa-angle-right"></i> Resultados <a id="refresh-results" href="#">Refrescar</a></h4>
                      <button id="btnExport" onclick="fnExcelReport();"> EXPORTAR A EXCEL </button>
                      <section id="unseen">
                        <table id="table-fillme" class="table table-bordered table-striped table-condensed">
                                      <thead>
                                      <tr>
                                          <th>Codigo</th>
                                          <th>Blancas</th>
                                          <th>Negras</th>
                                          <th>Ganador</th>
                                          <th>Hora inicio</th>
                                          <th>Hora fin</th>
                                          <th>Ver</th>
                                          <th>Eliminar</th>
                                      </tr>
                                      </thead>
                                      <tbody>
                                      </tbody>
                        </table>
                      </section>
                    </div><!-- /content-panel -->
                  </div><!-- /col-lg-4 -->
              </div>
          </section>
      </section>
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="{{ url_for('static', filename='assets/js/jquery.js')}}"></script>
    <script src="{{ url_for('static', filename='assets/js/jquery-1.8.3.min.js')}}"></script>
    <script src="{{ url_for('static', filename='assets/js/bootstrap.min.js')}}"></script>
    <script class="include" type="text/javascript" src="{{ url_for('static', filename='assets/js/jquery.dcjqaccordion.2.7.js')}}"></script>
    <script src="{{ url_for('static', filename='assets/js/jquery.scrollTo.min.js')}}"></script>
    <script src="{{ url_for('static', filename='assets/js/jquery.nicescroll.js')}}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/js/jquery.sparkline.js')}}"></script>


    <!--common script for all pages-->
    <script src="{{ url_for('static', filename='assets/js/common-scripts.js')}}"></script>

    <script type="text/javascript" src="{{ url_for('static', filename='assets/js/gritter/js/jquery.gritter.js')}}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='assets/js/gritter-conf.js')}}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='assets/js/cpanel.js')}}"></script>

    <!--script for this page-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" crossorigin="anonymous"></script>

    <script src="{{ url_for('static', filename='assets/js/sparkline-chart.js')}}"></script>
	  <script src="{{ url_for('static', filename='assets/js/zabuto_calendar.js')}}"></script>

	<script type="application/javascript">

        $(document).ready(function () {

            $("#date-popover").popover({html: true, trigger: "manual"});
            $("#date-popover").hide();
            $("#date-popover").click(function (e) {
                $(this).hide();
            });

            $("#my-calendar").zabuto_calendar({
                action: function () {
                    return myDateFunction(this.id, false);
                },
                action_nav: function () {
                    return myNavFunction(this.id);
                },
                ajax: {
                    url: "show_data.php?action=1",
                    modal: true
                },
                legend: [
                    {type: "text", label: "Special event", badge: "00"},
                    {type: "block", label: "Regular event", }
                ]
            });
        });

        function fnExcelReport()
        {
            var tab_text="<table border='2px'><tr bgcolor='#87AFC6'>";
            var textRange; var j=0;
            tab = document.getElementById('table-fillme'); // id of table

            for(j = 0 ; j < tab.rows.length ; j++)
            {
                tab_text=tab_text+tab.rows[j].innerHTML+"</tr>";
                //tab_text=tab_text+"</tr>";
            }

            tab_text=tab_text+"</table>";
            tab_text= tab_text.replace(/<A[^>]*>|<\/A>/g, "");//remove if u want links in your table
            tab_text= tab_text.replace(/<img[^>]*>/gi,""); // remove if u want images in your table
            tab_text= tab_text.replace(/<input[^>]*>|<\/input>/gi, ""); // reomves input params

            var ua = window.navigator.userAgent;
            var msie = ua.indexOf("MSIE ");

            if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))      // If Internet Explorer
            {
                txtArea1.document.open("txt/html","replace");
                txtArea1.document.write(tab_text);
                txtArea1.document.close();
                txtArea1.focus();
                sa=txtArea1.document.execCommand("SaveAs",true,"Say Thanks to Sumit.xls");
            }
            else                 //other browser not tested on IE 11
                sa = window.open('data:application/vnd.ms-excel,' + encodeURIComponent(tab_text));

            return (sa);
        }

        function myNavFunction(id) {
            $("#date-popover").hide();
            var nav = $("#" + id).data("navigation");
            var to = $("#" + id).data("to");
            console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
        }
    </script>


  </body>
</html>
